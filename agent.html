<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>لوحة المندوب</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
body {
  font-family: Arial, sans-serif;
  margin:0; padding:0;
  background:#f5f5f5; /* فاتح */
  color:#333;
}
.container { max-width:900px; margin:20px auto; padding:15px; }

h2 { text-align:center; color:#0277bd; margin-bottom:20px; }

section {
  display:none;
  padding:15px;
  background:#fff;
  border-radius:10px;
  margin-bottom:15px;
  box-shadow:0 3px 8px rgba(0,0,0,0.1);
}
section.active { display:block; }

.cards { display:flex; flex-wrap:wrap; gap:10px; }
.card { flex:1 1 200px; background:#e3f2fd; padding:10px; border-radius:8px; }
.card.green { background:#c8e6c9; }
.card.yellow { background:#fff9c4; }
.card.red { background:#ffcdd2; }

button {
  padding:8px 12px;
  background:#0288d1;
  color:#fff; border:none;
  border-radius:6px; cursor:pointer;
  margin-top:5px;
}
button:hover { background:#0277bd; }

textarea, select, input[type="file"] {
  width:100%; margin-top:8px; padding:6px;
  border:1px solid #ccc; border-radius:6px;
}

#signatureCanvas {
  border:1px solid #ccc;
  border-radius:6px;
  width:100%; height:150px;
  margin-top:8px;
}

.bottomNav {
  display:flex; justify-content:space-around;
  position:fixed; bottom:0; left:0;
  width:100%; background:#4dd0e1; padding:10px 0;
}
.bottomNav button {
  background:transparent; color:#fff;
  border:none; font-size:16px; cursor:pointer;
}
.bottomNav button.active { font-weight:bold; text-decoration:underline; }

#map { width:100%; height:300px; border-radius:10px; margin-top:10px; }
#notificationsContainer { max-height:300px; overflow-y:auto; }
.notification { padding:10px; margin-bottom:5px; border-radius:6px; background:#fff; box-shadow:0 1px 5px rgba(0,0,0,0.1);}
.notification.unread { color:red; font-weight:bold; }
</style>
</head>
<body>
<div class="container">
  <h2>لوحة المندوب</h2>

  <!-- المهام -->
  <section id="tasksSection" class="active">
    <h3>المهام اليومية</h3>
    <div class="cards" id="tasksContainer">
      <div class="card yellow">مثال: زيارة عميل 1</div>
      <div class="card green">مثال: تم إنجاز عميل 2</div>
      <div class="card red">مثال: مهمة متأخرة</div>
    </div>
  </section>

  <!-- رفع التقرير -->
  <section id="reportSection">
    <h3>رفع التقرير</h3>
    <select id="selectTask">
      <option>اختر مهمة</option>
      <option>زيارة عميل 1</option>
      <option>زيارة عميل 2</option>
    </select>
    <textarea placeholder="الملاحظات"></textarea>
    <input type="file" multiple>
    <canvas id="signatureCanvas"></canvas>
    <button>مسح التوقيع</button>
    <button>إرسال التقرير</button>
  </section>

  <!-- الخريطة -->
  <section id="mapSection">
    <h3>الموقع الحالي</h3>
    <div id="map"></div>
    <button id="refreshLocation">تحديث الموقع</button>
  </section>

  <!-- الإشعارات -->
  <section id="notificationsSection">
    <h3>الإشعارات</h3>
    <div id="notificationsContainer">
      <div class="notification unread">إشعار جديد</div>
      <div class="notification">إشعار قديم</div>
    </div>
  </section>
</div>

<!-- شريط التنقل -->
<div class="bottomNav">
  <button data-target="tasksSection" class="active">المهام</button>
  <button data-target="reportSection">التقارير</button>
  <button data-target="mapSection">الخريطة</button>
  <button data-target="notificationsSection">الإشعارات</button>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// التنقل بين الأقسام
const buttons = document.querySelectorAll('.bottomNav button');
const sections = document.querySelectorAll('section');

buttons.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    sections.forEach(s=>s.classList.remove('active'));
    buttons.forEach(b=>b.classList.remove('active'));
    document.getElementById(btn.dataset.target).classList.add('active');
    btn.classList.add('active');
  });
});

// الخريطة
let map = L.map('map').setView([30.0444, 31.2357], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
let marker = L.marker([30.0444, 31.2357]).addTo(map);
document.getElementById('refreshLocation').addEventListener('click', ()=>{
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const {latitude, longitude} = pos.coords;
      map.setView([latitude, longitude], 15);
      marker.setLatLng([latitude, longitude]);
    });
  }
});
</script>
</body>
</html>
