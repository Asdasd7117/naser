<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</title>
<link rel="stylesheet" href="css/style.css">
<script src="js/app.js" defer></script>
<script defer>
// ===================== Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª =====================
const translations = {
  ar: {
    tasks_title: "Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©",
    report_title: "Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ±",
    report_notes: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª",
    send_report: "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±",
    map_title: "Ø§Ù„Ø®Ø±ÙŠØ·Ø©",
    update_location: "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹",
    notifications_title: "Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",
    tasks_tab: "Ø§Ù„Ù…Ù‡Ø§Ù…",
    report_tab: "Ø§Ù„ØªÙ‚Ø±ÙŠØ±",
    map_tab: "Ø§Ù„Ø®Ø±ÙŠØ·Ø©",
    notifications_tab: "Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",
    toggle_lang: "Ø¹Ø±Ø¨ÙŠ / English",
    delegate_name: "Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ"
  },
  en: {
    tasks_title: "Daily Tasks",
    report_title: "Submit Report",
    report_notes: "Write your notes",
    send_report: "Send Report",
    map_title: "Map",
    update_location: "Update Location",
    notifications_title: "Notifications",
    tasks_tab: "Tasks",
    report_tab: "Report",
    map_tab: "Map",
    notifications_tab: "Notifications",
    toggle_lang: "Arabic / English",
    delegate_name: "Ahmed Ali"
  }
};

// ===================== Ø§Ù„Ù„ØºØ© =====================
function toggleLanguage() {
  const current = document.documentElement.lang;
  const newLang = current === "ar" ? "en" : "ar";
  document.documentElement.lang = newLang;
  document.documentElement.dir = newLang === "ar" ? "rtl" : "ltr";
  applyTranslations(newLang);
}

function applyTranslations(lang) {
  document.querySelectorAll("[data-translate]").forEach(el => {
    const key = el.getAttribute("data-translate");
    if (translations[lang][key]) el.innerText = translations[lang][key];
  });
  updateDelegateHeader();
}

// ===================== Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ + Ø§Ù„Ø³Ø§Ø¹Ø© =====================
function updateDelegateHeader() {
  const now = new Date().toLocaleTimeString("ar-EG", {
    hour: "2-digit", minute: "2-digit", hour12: false, timeZone: "Africa/Cairo"
  });
  const name = translations[document.documentElement.lang]["delegate_name"];
  document.getElementById("delegate-name").innerText = `ğŸ‘¤ ${name} | ğŸ•’ ${now}`;
}
setInterval(updateDelegateHeader, 60000);

// ===================== Ù…ØµÙÙˆÙØ© Ø§Ù„Ù…Ù‡Ø§Ù… =====================
let tasks = [
  { client: "Ø´Ø±ÙƒØ© Ø£Ø¨Ø¬Ø¯", address: "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©", time: "10:00 ØµØ¨Ø§Ø­Ù‹Ø§", status: "Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°" },
  { client: "Ù…Ø¤Ø³Ø³Ø© Ø£Ù„Ù", address: "Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©", time: "11:00", status: "Ù…Ø¤Ø¬Ù„Ø©" }
];

// ===================== Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù… =====================
function loadTasks() {
  const list = document.getElementById("tasks-list");
  list.innerHTML = "";
  tasks.forEach((t, idx) => {
    const div = document.createElement("div");
    div.className = "task-card";
    div.innerHTML = `
      <strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${t.client}<br>
      <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${t.address}<br>
      <strong>ÙˆÙ‚Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø©:</strong> ${t.time}<br>
      <label>Ø§Ù„Ø­Ø§Ù„Ø©:
        <select data-index="${idx}">
          <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°" ${t.status==="Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"?"selected":""}>Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
          <option value="Ù…ÙƒØªÙ…Ù„Ø©" ${t.status==="Ù…ÙƒØªÙ…Ù„Ø©"?"selected":""}>Ù…ÙƒØªÙ…Ù„Ø©</option>
          <option value="Ù…Ø¤Ø¬Ù„Ø©" ${t.status==="Ù…Ø¤Ø¬Ù„Ø©"?"selected":""}>Ù…Ø¤Ø¬Ù„Ø©</option>
        </select>
      </label>
    `;
    const select = div.querySelector("select");
    select.addEventListener("change", function() {
      tasks[this.dataset.index].status = this.value;
      alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ù…Ø© Ø¥Ù„Ù‰: ${this.value}`);
    });
    list.appendChild(div);
  });
}

// ===================== Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ± =====================
function submitDelegateReport() {
  const notes = document.getElementById('report-notes').value;
  alert(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± âœ…\nØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${notes}`);
  document.getElementById('report-notes').value = "";
}

// ===================== Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª =====================
function loadNotifications() {
  const notifs = [
    "ØªØ°ÙƒÙŠØ±: Ø²ÙŠØ§Ø±Ø© Ø´Ø±ÙƒØ© Ø£Ø¨Ø¬Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø© 10:00 ØµØ¨Ø§Ø­Ù‹Ø§",
    "ØªÙ†Ø¨ÙŠÙ‡: ØªØ£Ø®Ø±Øª Ø¹Ù† Ù…Ù‡Ù…Ø© Ù…Ø¤Ø³Ø³Ø© Ø£Ù„Ù Ø¨Ù€ 15 Ø¯Ù‚ÙŠÙ‚Ø©"
  ];
  const ul = document.getElementById("notifications-list");
  ul.innerHTML = "";
  notifs.forEach(n => {
    const li = document.createElement("li");
    li.textContent = n;
    ul.appendChild(li);
  });
}

// ===================== Ø§Ù„Ø®Ø±ÙŠØ·Ø© =====================
function initMap() {
  document.getElementById("map-container").innerHTML = "Ø®Ø±ÙŠØ·Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø· Google Maps API)";
}
function updateLocation() {
  alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ âœ…");
}

// ===================== Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… =====================
function showSection(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.querySelectorAll(".bottom-nav button").forEach(b => b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.getElementById("btn-" + id).classList.add("active");
}

// ===================== Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© =====================
window.onload = function(){
  applyTranslations(document.documentElement.lang);
  showSection('tasks');
  loadTasks();
  loadNotifications();
  initMap();
  updateDelegateHeader();
};
</script>
</head>
<body>

<!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
<header class="app-header">
  <h1 id="delegate-name"></h1>
</header>

<!-- Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ -->
<section id="tasks" class="screen">
  <h2 data-translate="tasks_title">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>
  <div id="tasks-list"></div>
</section>

<section id="report" class="screen">
  <h2 data-translate="report_title">Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</h2>
  <textarea id="report-notes" placeholder="" data-translate="report_notes"></textarea><br>
  <input type="file" id="report-images" multiple><br>
  <input type="file" id="report-signature"><br>
  <button onclick="submitDelegateReport()" data-translate="send_report">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
</section>

<section id="map" class="screen">
  <h2 data-translate="map_title">Ø§Ù„Ø®Ø±ÙŠØ·Ø©</h2>
  <div id="map-container"></div>
  <button onclick="updateLocation()" data-translate="update_location">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
</section>

<section id="notifications" class="screen">
  <h2 data-translate="notifications_title">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
  <ul id="notifications-list"></ul>
</section>

<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
<nav class="bottom-nav">
  <button id="btn-tasks" onclick="showSection('tasks')" data-translate="tasks_tab">Ø§Ù„Ù…Ù‡Ø§Ù…</button>
  <button id="btn-report" onclick="showSection('report')" data-translate="report_tab">Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
  <button id="btn-map" onclick="showSection('map')" data-translate="map_tab">Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
  <button id="btn-notifications" onclick="showSection('notifications')" data-translate="notifications_tab">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
</nav>

<!-- Ø²Ø± Ø§Ù„Ù„ØºØ© -->
<button class="lang-btn" onclick="toggleLanguage()" data-translate="toggle_lang">Ø¹Ø±Ø¨ÙŠ/English</button>

</body>
</html>
