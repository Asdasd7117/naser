<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุดุงุดุฉ ุงููุฏูุฑ / ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/app.js" defer></script>
</head>
<body onload="initManager()">

  <!-- ุงูููุฏุฑ -->
  <header class="app-header">
    <h1 id="manager-info">๐ค ุงููุฏูุฑ: ูุญูุฏ ุนูู | ๐ --:--</h1>
  </header>

  <!-- ุดุฑูุท ุงูุชููู -->
  <nav class="bottom-nav">
    <button id="btn-reports" onclick="showSection('reports')" data-translate="reports_tab">ุงูุชูุงุฑูุฑ</button>
    <button id="btn-attendance" onclick="showSection('attendance')" data-translate="attendance_tab">ุงูุญุถูุฑ</button>
    <button id="btn-admin" onclick="showSection('admin')" data-translate="admin_tab">ููุญุฉ ุงูุชุญูู</button>
  </nav>

  <!-- ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช -->
  <section id="reports" class="screen">
    <h1 data-translate="reports_title">ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช</h1>
    <table>
      <thead>
        <tr>
          <th data-translate="delegate_name">ุงูููุฏูุจ</th>
          <th data-translate="tasks_complete">ุงูููุงู ุงูููุชููุฉ</th>
          <th data-translate="tasks_pending">ุงูููุงู ุงููุคุฌูุฉ</th>
          <th data-translate="completion_rate">ูุณุจุฉ ุงูุฅูุฌุงุฒ</th>
        </tr>
      </thead>
      <tbody id="reports-table"></tbody>
    </table>
  </section>

  <!-- ุงูุญุถูุฑ ูุงูุงูุตุฑุงู -->
  <section id="attendance" class="screen">
    <h1 data-translate="attendance_title">ุงูุญุถูุฑ ูุงูุงูุตุฑุงู</h1>
    <div id="attendance-list"></div>
  </section>

  <!-- ููุญุฉ ุงูุชุญูู -->
  <section id="admin" class="screen">
    <h1 data-translate="admin_title">ููุญุฉ ุงูุชุญูู</h1>

    <h2 data-translate="add_task">ุฅุถุงูุฉ / ุชุนุฏูู ุงูููุงู</h2>
    <input type="text" id="task-client" placeholder="ุงุณู ุงูุนููู">
    <input type="text" id="task-address" placeholder="ุงูุนููุงู">
    <input type="time" id="task-time">
    <button onclick="addTask()" data-translate="add_task_btn">ุฅุถุงูุฉ ูููุฉ</button>

    <h2 data-translate="edit_delegate">ุชุนุฏูู ุจูุงูุงุช ุงูููุฏูุจูู</h2>
    <input type="text" id="delegate-name" placeholder="ุงุณู ุงูููุฏูุจ">
    <input type="text" id="delegate-phone" placeholder="ุฑูู ุงููุงุชู">
    <input type="email" id="delegate-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู">
    <button onclick="updateDelegate()" data-translate="update_delegate_btn">ุชุญุฏูุซ ุจูุงูุงุช ุงูููุฏูุจ</button>

    <h2 data-translate="broadcast">ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุฌูุงุนูุฉ</h2>
    <textarea id="broadcast-message" placeholder="ุงูุชุจ ุงูุฑุณุงูุฉ ููุง"></textarea>
    <button onclick="sendBroadcast()" data-translate="send_broadcast_btn">ุฅุฑุณุงู ุงูุฅุดุนุงุฑ</button>
  </section>

  <!-- ุฒุฑ ุงููุบุฉ -->
  <button class="lang-btn" onclick="toggleLanguage()" data-translate="toggle_lang">ุนุฑุจู / English</button>

  <script>
    // ================= ุงูุชุฑุฌูุงุช =================
    const translations = {
      ar: {
        reports_tab: "ุงูุชูุงุฑูุฑ",
        attendance_tab: "ุงูุญุถูุฑ",
        admin_tab: "ููุญุฉ ุงูุชุญูู",
        reports_title: "ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช",
        delegate_name: "ุงูููุฏูุจ",
        tasks_complete: "ุงูููุงู ุงูููุชููุฉ",
        tasks_pending: "ุงูููุงู ุงููุคุฌูุฉ",
        completion_rate: "ูุณุจุฉ ุงูุฅูุฌุงุฒ",
        attendance_title: "ุงูุญุถูุฑ ูุงูุงูุตุฑุงู",
        add_task: "ุฅุถุงูุฉ / ุชุนุฏูู ุงูููุงู",
        add_task_btn: "ุฅุถุงูุฉ ูููุฉ",
        edit_delegate: "ุชุนุฏูู ุจูุงูุงุช ุงูููุฏูุจูู",
        update_delegate_btn: "ุชุญุฏูุซ ุจูุงูุงุช ุงูููุฏูุจ",
        broadcast: "ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุฌูุงุนูุฉ",
        send_broadcast_btn: "ุฅุฑุณุงู ุงูุฅุดุนุงุฑ",
        toggle_lang: "ุนุฑุจู / English"
      },
      en: {
        reports_tab: "Reports",
        attendance_tab: "Attendance",
        admin_tab: "Admin Panel",
        reports_title: "Reports & Analytics",
        delegate_name: "Delegate",
        tasks_complete: "Tasks Completed",
        tasks_pending: "Tasks Pending",
        completion_rate: "Completion Rate",
        attendance_title: "Attendance",
        add_task: "Add / Edit Tasks",
        add_task_btn: "Add Task",
        edit_delegate: "Edit Delegate Info",
        update_delegate_btn: "Update Delegate",
        broadcast: "Send Broadcast",
        send_broadcast_btn: "Send Broadcast",
        toggle_lang: "Arabic / English"
      }
    };

    function applyTranslations() {
      const lang = document.documentElement.lang || "ar";
      document.querySelectorAll("[data-translate]").forEach(el => {
        const key = el.getAttribute("data-translate");
        if (translations[lang][key]) el.innerText = translations[lang][key];
      });
    }

    function toggleLanguage() {
      if (document.documentElement.lang === "ar") {
        document.documentElement.lang = "en";
        document.documentElement.dir = "ltr";
      } else {
        document.documentElement.lang = "ar";
        document.documentElement.dir = "rtl";
      }
      applyTranslations();
    }

    // ================= ุงูููุฏุฑ (ุงุณู ุงููุฏูุฑ + ุงูุณุงุนุฉ) =================
    function updateTime() {
      const now = new Date().toLocaleTimeString("ar-EG", { hour:"2-digit", minute:"2-digit", hour12:false, timeZone:"Africa/Cairo" });
      document.getElementById("manager-info").innerText = `๐ค ุงููุฏูุฑ: ูุญูุฏ ุนูู | ๐ ${now}`;
    }

    // ================= ุฅุธูุงุฑ ุงูุฃูุณุงู =================
    function showSection(id) {
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
      document.querySelectorAll(".bottom-nav button").forEach(b => b.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      document.getElementById("btn-" + id).classList.add("active");
    }

    // ================= ุชุญููู ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ =================
    function loadReports() {
      const reports = [
        {delegate:"ุฃุญูุฏ", complete:5, pending:2, percent:71},
        {delegate:"ุณุนูุฏ", complete:7, pending:1, percent:87}
      ];
      const tbody = document.getElementById("reports-table");
      tbody.innerHTML = "";
      reports.forEach(r=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${r.delegate}</td><td>${r.complete}</td><td>${r.pending}</td><td>${r.percent}%</td>`;
        tbody.appendChild(tr);
      });
    }

    function loadAttendance() {
      const attendance = [
        {delegate:"ุฃุญูุฏ", login:"09:00", logout:"17:00", deviation:"ุชุฃุฎูุฑ 10 ุฏูุงุฆู"},
        {delegate:"ุณุนูุฏ", login:"08:45", logout:"17:00", deviation:"ุณููู"}
      ];
      const container = document.getElementById("attendance-list");
      container.innerHTML = "";
      attendance.forEach(a=>{
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `<strong>${a.delegate}</strong><br>ุฏุฎูู: ${a.login} - ุฎุฑูุฌ: ${a.logout}<br>ุญุงูุฉ: ${a.deviation}`;
        container.appendChild(div);
      });
    }

    function loadTasksAdmin() {
      console.log("ุฌูุฒ ุจูุงูุงุช ุงูููุงู ูููุณุคูู");
    }

    function addTask() {
      alert("ุชู ุฅุถุงูุฉ ุงููููุฉ โ");
    }

    function updateDelegate() {
      alert("ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูููุฏูุจ โ");
    }

    function sendBroadcast() {
      const msg = document.getElementById("broadcast-message").value;
      if(msg) alert("ุชู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ: " + msg);
      else alert("ุฃุฏุฎู ุฑุณุงูุฉ ูุจู ุงูุฅุฑุณุงู!");
    }

    function initManager() {
      showSection("reports");
      loadReports();
      loadAttendance();
      loadTasksAdmin();
      updateTime();
      setInterval(updateTime, 60000);
      applyTranslations();
    }
  </script>
</body>
</html>
