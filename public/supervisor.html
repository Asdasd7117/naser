<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>المشرف</title>
<link rel="stylesheet" href="css/style.css">
<script src="js/lang.js"></script>
<script src="js/app.js"></script>
<script src="js/map.js"></script>
</head>
<body>
<h1>لوحة متابعة المندوبين</h1>
<div id="supervisor-list"></div>
<div id="map" style="width:100%;height:400px;"></div>
<button onclick="toggleLanguage()">عربي/English</button>
<script>
async function loadSupervisors(){
  const users = await fetch('/api/users').then(r=>r.json());
  const container = document.getElementById('supervisor-list');
  container.innerHTML = '';
  users.filter(u=>u.role==='delegate').forEach(u=>{
    const div = document.createElement('div');
    div.innerHTML = `<b>${u.user}</b> - <button onclick="trackDelegate('${u.user}')">تتبع على الخريطة</button>`;
    container.appendChild(div);
  });
}
function trackDelegate(user){
  addMarker(21.3891,39.8579,user);
}
loadSupervisors();
initMap();
</script>
</body>
</html>